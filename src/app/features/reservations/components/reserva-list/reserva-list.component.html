<div class="reserva-list">
  <header class="page-header">
    <h1 class="page-title">Reservations</h1>
  </header>

  @if (reservas$ | async; as reservas) {
    <table class="reserva-table" role="grid" aria-label="Reservations list">
      <thead>
        <tr>
          <th scope="col">Customer</th>
          <th scope="col">Date</th>
          <th scope="col">Time</th>
          <th scope="col">Service</th>
          <th scope="col">Status</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (reserva of reservas; track reserva.id) {
          <tr>
            <td>{{ reserva.customerName }}</td>
            <td>{{ reserva.date }}</td>
            <td>{{ reserva.time }}</td>
            <td>{{ reserva.service }}</td>
            <td>
              <span
                class="status-badge"
                [class.status-active]="reserva.status === 'ACTIVE'"
                [class.status-canceled]="reserva.status === 'CANCELED'"
              >
                {{ reserva.status }}
              </span>
            </td>
            <td>
              @if (reserva.status === 'ACTIVE') {
                <button
                  type="button"
                  class="cancel-btn"
                  (click)="cancelReserva(reserva.id)"
                  [attr.aria-label]="'Cancel reservation for ' + reserva.customerName"
                >
                  Cancel
                </button>
              } @else {
                <span class="canceled-label" aria-hidden="true">â€”</span>
              }
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="6" class="empty-message">No reservations found.</td>
          </tr>
        }
      </tbody>
    </table>
  } @else {
    <div class="loading-state" role="status" aria-live="polite">
      <div class="loading-spinner" aria-hidden="true"></div>
      <p class="loading-message">Loading reservations...</p>
    </div>
  }
</div>
